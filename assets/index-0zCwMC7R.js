import{u as L,g as S,r as s,a as I,G as g,j as t,M as k,T as C,t as m,b as B,c as j,d as p,e as x,I as f,B as D,h as E,S as y}from"./index-B7NdNsQD.js";import{C as M,T as O}from"./container-LCg4R3vX.js";import{S as T,D as U,a as _}from"./data-table-BaDbrXqb.js";import{F as R,C as F}from"./FormControlLabel-CQRzKsM5.js";import"./TableRow-B09wb8zi.js";import"./TableCell-wd3IxdDe.js";function N(e,i,n,r,o){const[a,d]=s.useState(()=>o&&n?n(e).matches:r?r(e).matches:i);return I(()=>{let u=!0;if(!n)return;const l=n(e),h=()=>{u&&d(l.matches)};return h(),l.addListener(h),()=>{u=!1,l.removeListener(h)}},[e,n]),a}const w=s.useSyncExternalStore;function Q(e,i,n,r,o){const a=s.useCallback(()=>i,[i]),d=s.useMemo(()=>{if(o&&n)return()=>n(e).matches;if(r!==null){const{matches:c}=r(e);return()=>c}return a},[a,e,r,o,n]),[u,l]=s.useMemo(()=>{if(n===null)return[a,()=>()=>{}];const c=n(e);return[()=>c.matches,v=>(c.addListener(v),()=>{c.removeListener(v)})]},[a,n,e]);return w(l,u,d)}function W(e,i={}){const n=L(),r=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:o=!1,matchMedia:a=r?window.matchMedia:null,ssrMatchMedia:d=null,noSsr:u=!1}=S({name:"MuiUseMediaQuery",props:i,theme:n});let l=typeof e=="function"?e(n):e;return l=l.replace(/^@media( ?)/m,""),(w!==void 0?Q:N)(l,o,a,d,u)}const G=e=>s.createElement("svg",{width:36,height:36,viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},s.createElement("rect",{width:36,height:36,rx:4,fill:"#2A2A32"}),s.createElement("path",{d:"M23.06 13.0474C21.6772 11.6369 19.7503 10.7617 17.619 10.7617C13.4111 10.7617 10 14.1728 10 18.3807C10 22.5885 13.4111 25.9996 17.619 25.9996C20.8887 25.9996 23.6773 23.94 24.7582 21.0473",stroke:"white",strokeWidth:1.5}),s.createElement("path",{d:"M26 16.0952H19.9048L26 10V16.0952Z",fill:"white"})),Z=e=>s.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.9365 6.83512L16.0573 5.72584L18.2711 7.91696L17.1504 9.02623L14.9365 6.83512ZM13.8704 7.89035L5.84206 15.8363L5.57349 18.402L8.05076 18.0325L16.0842 10.0815L13.8704 7.89035ZM17.6632 10.6292L8.97809 19.2252C8.83461 19.3672 8.64962 19.4598 8.44996 19.4896L5.09272 19.9903C4.47858 20.0819 3.94309 19.5694 4.00774 18.9518L4.37067 15.4848C4.39352 15.2665 4.49124 15.0628 4.64722 14.9085L15.389 4.2768C15.7592 3.9104 16.3554 3.9104 16.7256 4.2768L19.7213 7.24175C20.0969 7.61353 20.0969 8.22039 19.7213 8.59216L17.6925 10.6001C17.6896 10.6032 17.6866 10.6062 17.6836 10.6093C17.6769 10.616 17.6701 10.6227 17.6632 10.6292Z",fill:"#7D7D87"}));var b=(e=>(e.deleteUserFromOrg="DeleteUserFromOrg",e.inviteToOrg="InviteToOrg",e.deleteInviteFromOrg="DeleteInviteFromOrg",e.updateInviteToOrg="UpdateInviteInOrg",e.updateOrganization="UpdateOrganization",e.updateUserInOrg="UpdateUserInOrg",e.listUsersInOrg="ListUsersInOrg",e.getImageVersions="GetImageVersions",e.approveInvite="ApproveInvite",e.listCluster="ListClusters",e.createCluster="CreateCluster",e.deleteCluster="DeleteCluster",e.updateCluster="UpdateCluster",e.listExtensions="ListExtensions",e.createExtension="CreateExtension",e.deleteExtension="DeleteExtension",e.installExtension="InstallExtension",e.uninstallExtension="UninstallExtension",e))(b||{});const V=({bucket:e,open:i,setOpen:n})=>{const[r,o]=s.useState(!1),[a,d]=s.useState(!1),{removeBucket:u}=s.useContext(g).buckets,l=()=>{o(!0),u(e),n(!1),o(!1)};return t.jsxs(k,{id:"delete-bucket-modal",title:`Delete bucket ${e==null?void 0:e.name}`,open:i,submitButtonColor:"error",submitButtonLabel:"Delete",cancelButtonDisabled:r,submitButtonDisabled:!a||r,onClose:()=>{d(!1),n(!1)},onSubmit:()=>{l()},loading:r,children:[t.jsx(C,{variant:"body2",color:"text.secondary",sx:{mb:m.spacing(3)},children:"The bucket will be permanently deleted. Are you sure you want to do this?"}),t.jsx(R,{sx:{maxWidth:"100%","& > span":{maxWidth:"100%"}},control:t.jsx(F,{id:"confirm-delete",disabled:r,checked:a,value:a,onChange:h=>d(h.target.checked)}),label:t.jsx(B,{variant:"body2",sx:{maxWidth:"100%",pr:m.spacing(4)},children:`I confirm delete this bucket "${e==null?void 0:e.name}"`})})]})},z=({buckets:e=[],fetchBuckets:i,onCreateClick:n})=>{const{permissions:{canPerformAction:r}}=s.useContext(g),[o,a]=s.useState({}),[d,u]=s.useState(!1),{formatMessage:l}=j();W(c=>c.breakpoints.up("lg"));const h=c=>{a(c),u(!0)};return t.jsxs(t.Fragment,{children:[t.jsx(M,{children:t.jsxs(p,{container:!0,direction:"column",flexWrap:"nowrap",id:"buckets-list",children:[t.jsxs(p,{container:!0,alignItems:"center",justifyContent:"space-between",children:[t.jsx(C,{variant:"h2",id:"buckets-list-header",children:l({id:"bucket_list.title",defaultMessage:"Buckets list ({count})"},{count:e.length})}),t.jsxs(p,{children:[t.jsx(x,{title:l({id:"bucket_list.reload_list_tooltip",defaultMessage:"Refersh bucket list"}),children:t.jsx(f,{color:"primary","aria-label":"upload picture",component:"span",sx:{p:0},onClick:()=>i(),children:t.jsx(G,{width:36,height:36})})}),t.jsx(x,{title:r(b.createBucket)?"":l({id:"bucket_list.create_bucket_no_permissions",defaultMessage:"Insufficient permissions"}),children:t.jsx("span",{children:t.jsxs(D,{variant:"contained",sx:{ml:m.spacing(2)},onClick:n,disabled:!r(b.createBucket),children:[t.jsx(T,{width:20,height:20}),t.jsx(C,{variant:"button",sx:{ml:m.spacing(1)},children:l({id:"bucket_list.create_bucket_cta",defaultMessage:"Create Bucket"})})]})})})]})]}),t.jsx("br",{}),t.jsx(U,{id:"buckets-table",columns:{id:{title:"ID",width:400},name:{title:"Name"},created_at:{title:"Created",width:250}},rows:e,renderNoRows:()=>"No buckets created yet.",renderCell:{created_at:c=>E(c).calendar()},renderActions:c=>t.jsxs(p,{container:!0,justifyContent:"space-between",children:[t.jsx(x,{title:"Rename",placement:"left-start",children:t.jsx(f,{className:"rename-bucket-button",sx:{p:m.spacing(.25)},onClick:()=>{},children:t.jsx(Z,{})})}),t.jsx(x,{title:"Remove",placement:"right-start",children:t.jsx(f,{className:"remove-bucket-button",sx:{p:m.spacing(.25)},onClick:()=>h(c),children:t.jsx(_,{})})})]})})]})}),t.jsx(V,{bucket:o,open:d,setOpen:u})]})},H=({open:e,setOpen:i})=>{const{createBucket:n}=s.useContext(g).buckets,[r,o]=s.useState(!1),[a,d]=s.useState(""),u=()=>{o(!0),n({name:a,id:"",createdAt:Date(),provider:""}),o(!1),i(!1)};return t.jsx(k,{id:"rename-cluster-modal",title:"Create bucket",open:e,submitButtonLabel:"Create",cancelButtonDisabled:r,submitButtonDisabled:r||!a.length,onClose:()=>i(!1),onSubmit:()=>u(),loading:r,children:t.jsx(O,{id:"new-name",error:!a.length,helperText:!a.length&&"Name is required",variant:"filled",value:a,onChange:l=>d(l.target.value),label:"Bucket name",fullWidth:!0})})},A=()=>{const{orgs:{activeOrgId:e},buckets:{buckets:i,isLoading:n,fetchBuckets:r}}=s.useContext(g),[o,a]=s.useState(!1);return s.useState(null),s.useState(!1),j(),n?t.jsx(y,{noSidebar:!0}):t.jsxs(t.Fragment,{children:[t.jsx(z,{buckets:i,fetchBuckets:r,onCreateClick:()=>a(!0)}),t.jsx(H,{open:o,setOpen:a})]})};export{A as default};
