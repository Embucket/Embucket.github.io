var Z=Object.defineProperty;var $=(s,n,i)=>n in s?Z(s,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[n]=i;var Y=(s,n,i)=>($(s,typeof n!="symbol"?n+"":n,i),i);import{H as W,s as q,C as J,c as V,r as O,G as H,L as Q,j as a,d as B,T as X,E as _,h as ee,t as te}from"./index-B7NdNsQD.js";import{u as ie}from"./useQuery-BSI6mGRo.js";import{C as ne,S as se}from"./container-LCg4R3vX.js";import{S as oe}from"./styled-data-grid-CtWt_PZ0.js";import"./FormControlLabel-CQRzKsM5.js";import"./TableCell-wd3IxdDe.js";/**
 * filesize
 *
 * @copyright 2024 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 10.1.1
 */const re="array",ae="bit",k="bits",le="byte",D="bytes",b="",ce="exponent",me="function",K="iec",fe="Invalid number",ue="Invalid rounding method",I="jedec",be="object",L=".",de="round",ge="s",he="si",pe="kbit",xe="kB",Se=" ",ye="string",Ee="0",j={symbol:{iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},fullform:{iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]}};function Be(s,{bits:n=!1,pad:i=!1,base:l=-1,round:d=2,locale:g=b,localeOptions:T={},separator:c=b,spacer:o=Se,symbols:S={},standard:r=b,output:y=ye,fullform:z=!1,fullforms:M=[],exponent:C=-1,roundingMethod:A=de,precision:p=0}={}){let t=C,u=Number(s),e=[],m=0,E=b;r===he?(l=10,r=I):r===K||r===I?l=2:l===2?r=K:(l=10,r=I);const x=l===10?1e3:1024,F=z===!0,v=u<0,w=Math[A];if(typeof s!="bigint"&&isNaN(s))throw new TypeError(fe);if(typeof w!==me)throw new TypeError(ue);if(v&&(u=-u),(t===-1||isNaN(t))&&(t=Math.floor(Math.log(u)/Math.log(x)),t<0&&(t=0)),t>8&&(p>0&&(p+=8-t),t=8),y===ce)return t;if(u===0)e[0]=0,E=e[1]=j.symbol[r][n?k:D][t];else{m=u/(l===2?Math.pow(2,t*10):Math.pow(1e3,t)),n&&(m=m*8,m>=x&&t<8&&(m=m/x,t++));const h=Math.pow(10,t>0?d:0);e[0]=w(m*h)/h,e[0]===x&&t<8&&C===-1&&(e[0]=1,t++),E=e[1]=l===10&&t===1?n?pe:xe:j.symbol[r][n?k:D][t]}if(v&&(e[0]=-e[0]),p>0&&(e[0]=e[0].toPrecision(p)),e[1]=S[e[1]]||e[1],g===!0?e[0]=e[0].toLocaleString():g.length>0?e[0]=e[0].toLocaleString(g,T):c.length>0&&(e[0]=e[0].toString().replace(L,c)),i&&Number.isInteger(e[0])===!1&&d>0){const h=c||L,R=e[0].toString().split(h),G=R[1]||b,P=G.length,U=d-P;e[0]=`${R[0]}${h}${G.padEnd(P+U,Ee)}`}return F&&(e[1]=M[t]?M[t]:j.fullform[r][t]+(n?ae:le)+(e[0]===1?b:ge)),y===re?e:y===be?{value:e[0],symbol:e[1],exponent:t,unit:E}:e.join(o)}const f=class f extends W{static getInstance(){return f.instance||new f}constructor(){if(super(),f.instance)throw new Error("Service is already initialized. Use `OrgService.getInstance()` instead.");f.instance=this}list(n){return this.get({url:`/buckets/${n}/objects`})}};Y(f,"instance");let N=f;const Ie=q(J)(({theme:s})=>({marginLeft:s.spacing(2),borderRadius:4,".MuiSelect-select":{paddingTop:s.spacing(1),paddingBottom:s.spacing(1),backgroundColor:"transparent !important"}})),Re=()=>{const{formatMessage:s}=V(),{buckets:n}=O.useContext(H).buckets,[i,l]=O.useState(n.find(()=>!0)),d=Q(N),{isPending:g,error:T,data:c}=ie({queryKey:["objects",i==null?void 0:i.name],queryFn:()=>d.list(i==null?void 0:i.name),enabled:!!i});return a.jsx(ne,{children:a.jsxs(B,{container:!0,direction:"column",flexWrap:"nowrap",id:"buckets-list",children:[a.jsxs(B,{container:!0,alignItems:"center",justifyContent:"space-between",children:[a.jsx(X,{variant:"h2",id:"buckets-list-header",children:s({id:"objects_list.title",defaultMessage:"Explore {name}"},{name:i==null?void 0:i.name})}),a.jsx(B,{children:a.jsx(Ie,{children:a.jsx(se,{sx:{width:300},value:i==null?void 0:i.name,onChange:o=>{const S=o.target.value;l(n.find(r=>r.name===S))},children:n.map(o=>a.jsx(_,{value:o.name,children:o.name},o.id))})})})]}),a.jsx("br",{}),a.jsx(oe,{rows:g?[]:c==null?void 0:c.data.objects,columns:[{field:"name",headerName:"Name",flex:1},{field:"last_modified",headerName:"Last Modified",minWidth:200,valueFormatter:o=>ee(o.value).calendar()},{field:"size",headerName:"Size",minWidth:200,valueFormatter:o=>Be(o.value)}],getRowId:o=>o.name,disableColumnMenu:!0,disableSelectionOnClick:!0,sx:{height:"100%",backgroundColor:te.palette.background.paper,borderRadius:"4px"}})]})})};export{Re as default};
